using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Drawing;

namespace Tetris
{
    class Brick
    {
        
        //public int[,,,] shape = new int[7, 4, 5, 5];
        public int[,,,] shape;
        public int[,] Mod;
        public Point Pos;
        public int[,] tMod;
        public Point tPos;
        public Color col;
        public int shape1=0;
        public int shape2 = 0;
        public bool canChange = true;
        public Brick()
        {
            shapeInitialize();
            col = Color.FromArgb(255, Game.random.Next(255), 255 - Game.random.Next(255), 255 - Game.random.Next(255));
            Mod = new int[5, 5];
            Pos = new Point();
            tMod = new int[5, 5];
            tPos = new Point();
            MoveTestMod();
        }
        public Brick(int i = 0)
        {
            shapeInitialize();
            shape1 = i;
            col = Color.FromArgb(255, Game.random.Next(255), 255 - Game.random.Next(255), 255 - Game.random.Next(255));
            switch (i)
            {
                case 0:
                    Mod = assignShapeValue(0, 0);
                    
            break;
                case 1:
                    Mod = assignShapeValue(1, 0);
                    break;
                case 2:
                    Mod = assignShapeValue(2, 0);
                    break;
                case 3:
                    Mod = assignShapeValue(3, 0);
                    break;
                case 4:
                    Mod = assignShapeValue(4, 0);
                    break;
                case 5:
                    Mod = assignShapeValue(5, 0);
                    break;
                case 6:
                    Mod = assignShapeValue(6, 0);
                    break;

                case 7:
                    Mod = assignShapeValue(7, 0);
                    break;
                case 8:
                    Mod = assignShapeValue(8, 0);
                    break;
                case 9:
                    Mod = assignShapeValue(9, 0);
                    break;
                case 10:
                    Mod = assignShapeValue(10, 0);
                    break;
                case 11:
                    Mod = assignShapeValue(11, 0);
                    break;
                case 12:
                    Mod = assignShapeValue(12, 0);
                    break;
                case 13:
                    Mod = assignShapeValue(13, 0);
                    break;
                case 14:
                    Mod = assignShapeValue(14, 0);
                    break;
                case 15:
                    Mod = assignShapeValue(15, 0);
                    break;
                case 16:
                    Mod = assignShapeValue(16, 0);
                    break;
                case 17:
                    Mod = assignShapeValue(17, 0);
                    break;
                case 18:
                    Mod = assignShapeValue(18, 0);
                    break;
                default://不可能出现的，除非有Bug
                    Mod = new int[5, 5]
      {
          
              { 0,0,0,0,0},
              { 0,0,1,0,0},
              { 0,1,1,1,0},
              { 0,0,1,0,0},
              { 0,0,0,0,0},
          
       };break;
            }
            Pos = new Point();
            tMod = new int[5, 5];
            tPos = new Point();
        }
        public void RotateTestMod()//Mod旋转后输出到tMod
        {
            //for (int i = 0; i < 5; i++)
            //    for (int j = 0; j < 5; j++)
            //        tMod[j, 5 - i - 1] = Mod[i, j];
            //this.shape1++;
            //shape1 = shape1 % 4;
            tMod = assignShapeValue(shape1, (shape2 + 1)%4);
        }
        public void MoveTestMod()//Mod,Pos输出到tMod,tPos
        {
            InitialtPos();
            for (int i = 0; i < 5; i++)
                for (int j = 0; j < 5; j++)
                    tMod[i, j] = Mod[i, j];
        }
        public void ChangePos()
        {
            Pos.X = tPos.X;
            Pos.Y = tPos.Y;
        }
        public void InitialtPos()//Pos输出到tPos
        {
            tPos.X = Pos.X;
            tPos.Y = Pos.Y;
        }
        public void ChangeMod()
        {
            for (int i = 0; i < 5; i++)
                for (int j = 0; j < 5; j++)
                    Mod[i, j] = tMod[i, j];
        }
        public void MoveTestLeft()
        {
            tPos.Offset(-1, 0);
        }
        public void MoveTestRight()
        {
            tPos.Offset(1, 0);
        }
        public void MoveTestUp()
        {
            tPos.Offset(0, -1);
        }
        public void MoveTestDown()
        {
            tPos.Offset(0, 1);
        }

        
        public int[,] assignShapeValue(int n,int m)
        {
            int[,] shape2 = new int[5,5];
            for (int i = 0; i < 5; i++)
            {
                for (int j = 0; j < 5; j++)
                {
                    shape2[i, j] = shape[n, m, i, j];
                }
            }
            return shape2;
        }


        private void shapeInitialize()
        {
            shape = new int[19, 4, 5, 5]
            {
                {
                {
                   { 1,1,1,1,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                },
                {
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 0,0,0,0,0},
                },
                {
                   { 1,1,1,1,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                },
                {
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 0,0,0,0,0},
                }

            },

           {
               {
                   { 1,1,0,0,0},
                   { 1,1,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 1,1,0,0,0},
                   { 1,1,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 1,1,0,0,0},
                   { 1,1,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 1,1,0,0,0},
                   { 1,1,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               }
           },

           {
               {
                   { 1,1,1,0,0},
                   { 0,1,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 1,0,0,0,0},
                   { 1,1,0,0,0},
                   { 1,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 0,1,0,0,0},
                   { 1,1,1,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 0,1,0,0,0},
                   { 1,1,0,0,0},
                   { 0,1,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               }
           },

           {
               {
                   { 1,1,0,0,0},
                   { 0,1,1,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 0,1,0,0,0},
                   { 1,1,0,0,0},
                   { 1,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 1,1,0,0,0},
                   { 0,1,1,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 0,1,0,0,0},
                   { 1,1,0,0,0},
                   { 1,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               }
           },

           {
               {
                   { 0,1,1,0,0},
                   { 1,1,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 1,0,0,0,0},
                   { 1,1,0,0,0},
                   { 0,1,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 0,1,1,0,0},
                   { 1,1,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 1,0,0,0,0},
                   { 1,1,0,0,0},
                   { 0,1,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
           },

           {
               {
                   { 1,1,1,0,0},
                   { 1,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 1,1,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 0,0,1,0,0},
                   { 1,1,1,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 1,1,0,0,0},
                   { 0,1,0,0,0},
                   { 0,1,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               }
           },

           {
               {
                   { 1,1,1,0,0},
                   { 0,0,1,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 1,1,0,0,0},
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 1,0,0,0,0},
                   { 1,1,1,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 0,1,0,0,0},
                   { 0,1,0,0,0},
                   { 1,1,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               }
           },











           {
               {
                   { 1,1,1,0,0},
                   { 0,1,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 1,0,0,0,0},
                   { 1,1,0,0,0},
                   { 1,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 0,1,0,0,0},
                   { 1,1,1,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 0,1,0,0,0},
                   { 1,1,0,0,0},
                   { 0,1,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               }
           },
           {
               {
                   { 1,1,1,0,0},
                   { 0,1,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 1,0,0,0,0},
                   { 1,1,0,0,0},
                   { 1,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 0,1,0,0,0},
                   { 1,1,1,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 0,1,0,0,0},
                   { 1,1,0,0,0},
                   { 0,1,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               }
           },
           {
               {
                   { 1,1,1,0,0},
                   { 0,1,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 1,0,0,0,0},
                   { 1,1,0,0,0},
                   { 1,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 0,1,0,0,0},
                   { 1,1,1,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 0,1,0,0,0},
                   { 1,1,0,0,0},
                   { 0,1,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               }
           },
           {
               {
                   { 1,1,1,0,0},
                   { 1,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 1,1,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 0,0,1,0,0},
                   { 1,1,1,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 1,1,0,0,0},
                   { 0,1,0,0,0},
                   { 0,1,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               }
           },

           {
               {
                   { 1,1,1,0,0},
                   { 0,0,1,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 1,1,0,0,0},
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 1,0,0,0,0},
                   { 1,1,1,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 0,1,0,0,0},
                   { 0,1,0,0,0},
                   { 1,1,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               }
           },
           {
               {
                   { 1,1,1,0,0},
                   { 1,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 1,1,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 0,0,1,0,0},
                   { 1,1,1,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 1,1,0,0,0},
                   { 0,1,0,0,0},
                   { 0,1,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               }
           },

           {
               {
                   { 1,1,1,0,0},
                   { 0,0,1,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 1,1,0,0,0},
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 1,0,0,0,0},
                   { 1,1,1,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               },
               {
                   { 0,1,0,0,0},
                   { 0,1,0,0,0},
                   { 1,1,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
               }
           },
                {
                {
                   { 1,1,1,1,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                },
                {
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 0,0,0,0,0},
                },
                {
                   { 1,1,1,1,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                },
                {
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 0,0,0,0,0},
                }

            },
                {
                {
                   { 1,1,1,1,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                },
                {
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 0,0,0,0,0},
                },
                {
                   { 1,1,1,1,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                },
                {
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 0,0,0,0,0},
                }

            },
                {
                {
                   { 1,1,1,1,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                },
                {
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 0,0,0,0,0},
                },
                {
                   { 1,1,1,1,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                },
                {
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 0,0,0,0,0},
                }

            },
                {
                {
                   { 1,1,1,1,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                },
                {
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 0,0,0,0,0},
                },
                {
                   { 1,1,1,1,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                },
                {
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 0,0,0,0,0},
                }

            },
                {
                {
                   { 1,1,1,1,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                },
                {
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 0,0,0,0,0},
                },
                {
                   { 1,1,1,1,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                   { 0,0,0,0,0},
                },
                {
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 1,0,0,0,0},
                   { 0,0,0,0,0},
                }

            }






         };
        }
    }
}
